const i={openaiApiKey:"openaiApiKey",groqApiKey:"groqApiKey",webhookUrl:"webhookUrl",replyPrompt:"replyPrompt",leadPrompt:"leadPrompt",chatMinDelay:"chatMinDelay",chatMaxDelay:"chatMaxDelay",loopMinDelay:"loopMinDelay",loopMaxDelay:"loopMaxDelay",startHour:"startHour",endHour:"endHour",replyProvider:"replyProvider",decisionProvider:"decisionProvider",leadDetectionProvider:"leadDetectionProvider",groqModel:"groqModel",openaiModel:"openaiModel"},n={openaiApiKey:"",groqApiKey:"",webhookUrl:"",replyPrompt:`You are {user_name}'s assistant. Reply to this lead based on context:
{extracted_text}
Reply briefly and professionally.`,leadPrompt:"Does this conversation indicate strong buying intent or interest? Reply YES or NO.",chatMinDelay:2e3,chatMaxDelay:5e3,loopMinDelay:1e4,loopMaxDelay:3e4,startHour:9,endHour:18,replyProvider:"groq",decisionProvider:"groq",leadDetectionProvider:"openai",groqModel:"openai/gpt-oss-120b",openaiModel:"gpt-5-mini"},h=["openai","groq"],f=["openai/gpt-oss-20b","openai/gpt-oss-120b","llama-3.3-70b-versatile","llama-3.1-8b-instant","moonshotai/kimi-k2-instruct-0905"],v=["gpt-5-mini","gpt-5-nano","gpt-4.1-nano","gpt-4.1-mini"];function y(o,e,r,d){const t=typeof o=="number"?o:Number(o);if(!Number.isFinite(t))return d;const a=Math.round(t);return Math.min(r,Math.max(e,a))}function s(o,e,r,d){const t=typeof o=="number"?o:Number(o);return Number.isFinite(t)?Math.min(r,Math.max(e,Math.floor(t))):d}function l(o,e){return typeof o!="string"?e:o}function p(o,e){return typeof o=="string"&&h.includes(o)?o:e}function x(o,e){return typeof o=="string"&&f.includes(o)?o:e}function b(o,e){return typeof o=="string"&&v.includes(o)?o:e}function A(o){return o.trim()}async function q(){return new Promise(o=>{chrome.storage.local.get(Object.values(i),e=>{const r=s(e[i.chatMinDelay],250,6e4,n.chatMinDelay),d=s(e[i.chatMaxDelay],250,12e4,n.chatMaxDelay),t=s(e[i.loopMinDelay],500,6e5,n.loopMinDelay),a=s(e[i.loopMaxDelay],500,6e5,n.loopMaxDelay),c=Math.min(r,d),M=Math.max(r,d),D=Math.min(t,a),m=Math.max(t,a),P=y(e[i.startHour],0,23,n.startHour),g=y(e[i.endHour],0,23,n.endHour),u={openaiApiKey:l(e[i.openaiApiKey],n.openaiApiKey).trim(),groqApiKey:l(e[i.groqApiKey],n.groqApiKey).trim(),webhookUrl:A(l(e[i.webhookUrl],n.webhookUrl)),replyPrompt:l(e[i.replyPrompt],n.replyPrompt),leadPrompt:l(e[i.leadPrompt],n.leadPrompt),chatMinDelay:c,chatMaxDelay:M,loopMinDelay:D,loopMaxDelay:m,startHour:P,endHour:g,replyProvider:p(e[i.replyProvider],n.replyProvider),decisionProvider:p(e[i.decisionProvider],n.decisionProvider),leadDetectionProvider:p(e[i.leadDetectionProvider],n.leadDetectionProvider),groqModel:x(e[i.groqModel],n.groqModel),openaiModel:b(e[i.openaiModel],n.openaiModel)};o(u)})})}async function K(o){const e={};return o.openaiApiKey!==void 0&&(e[i.openaiApiKey]=String(o.openaiApiKey)),o.groqApiKey!==void 0&&(e[i.groqApiKey]=String(o.groqApiKey)),o.webhookUrl!==void 0&&(e[i.webhookUrl]=String(o.webhookUrl)),o.replyPrompt!==void 0&&(e[i.replyPrompt]=String(o.replyPrompt)),o.leadPrompt!==void 0&&(e[i.leadPrompt]=String(o.leadPrompt)),o.chatMinDelay!==void 0&&(e[i.chatMinDelay]=o.chatMinDelay),o.chatMaxDelay!==void 0&&(e[i.chatMaxDelay]=o.chatMaxDelay),o.loopMinDelay!==void 0&&(e[i.loopMinDelay]=o.loopMinDelay),o.loopMaxDelay!==void 0&&(e[i.loopMaxDelay]=o.loopMaxDelay),o.startHour!==void 0&&(e[i.startHour]=o.startHour),o.endHour!==void 0&&(e[i.endHour]=o.endHour),o.replyProvider!==void 0&&(e[i.replyProvider]=o.replyProvider),o.decisionProvider!==void 0&&(e[i.decisionProvider]=o.decisionProvider),o.leadDetectionProvider!==void 0&&(e[i.leadDetectionProvider]=o.leadDetectionProvider),o.groqModel!==void 0&&(e[i.groqModel]=o.groqModel),o.openaiModel!==void 0&&(e[i.openaiModel]=o.openaiModel),new Promise(r=>{chrome.storage.local.set(e,()=>r())})}export{n as D,q as g,K as s};
