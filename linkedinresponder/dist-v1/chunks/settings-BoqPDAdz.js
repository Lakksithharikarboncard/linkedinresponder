const r={openaiApiKey:"openaiApiKey",groqApiKey:"groqApiKey",webhookUrl:"webhookUrl",replyPrompt:"replyPrompt",leadPrompt:"leadPrompt",chatMinDelay:"chatMinDelay",chatMaxDelay:"chatMaxDelay",loopMinDelay:"loopMinDelay",loopMaxDelay:"loopMaxDelay",startHour:"startHour",endHour:"endHour",replyProvider:"replyProvider",decisionProvider:"decisionProvider",leadDetectionProvider:"leadDetectionProvider"},i={openaiApiKey:"",groqApiKey:"",webhookUrl:"",replyPrompt:`You are {user_name}'s assistant. Reply to this lead based on context:
{extracted_text}
Reply briefly and professionally.`,leadPrompt:"Does this conversation indicate strong buying intent or interest? Reply YES or NO.",chatMinDelay:2e3,chatMaxDelay:5e3,loopMinDelay:1e4,loopMaxDelay:3e4,startHour:9,endHour:18,replyProvider:"groq",decisionProvider:"groq",leadDetectionProvider:"openai"},f=["openai","groq"];function s(e,o,n,a){const t=typeof e=="number"?e:Number(e);if(!Number.isFinite(t))return a;const y=Math.round(t);return Math.min(n,Math.max(o,y))}function d(e,o,n,a){const t=typeof e=="number"?e:Number(e);return Number.isFinite(t)?Math.min(n,Math.max(o,Math.floor(t))):a}function l(e,o){return typeof e!="string"?o:e}function c(e,o){return typeof e=="string"&&f.includes(e)?e:o}function v(e){return e.trim()}async function g(){return new Promise(e=>{chrome.storage.local.get(Object.values(r),o=>{const n=d(o[r.chatMinDelay],250,6e4,i.chatMinDelay),a=d(o[r.chatMaxDelay],250,12e4,i.chatMaxDelay),t=d(o[r.loopMinDelay],500,6e5,i.loopMinDelay),y=d(o[r.loopMaxDelay],500,6e5,i.loopMaxDelay),p=Math.min(n,a),M=Math.max(n,a),D=Math.min(t,y),P=Math.max(t,y),h=s(o[r.startHour],0,23,i.startHour),m=s(o[r.endHour],0,23,i.endHour),u={openaiApiKey:l(o[r.openaiApiKey],i.openaiApiKey).trim(),groqApiKey:l(o[r.groqApiKey],i.groqApiKey).trim(),webhookUrl:v(l(o[r.webhookUrl],i.webhookUrl)),replyPrompt:l(o[r.replyPrompt],i.replyPrompt),leadPrompt:l(o[r.leadPrompt],i.leadPrompt),chatMinDelay:p,chatMaxDelay:M,loopMinDelay:D,loopMaxDelay:P,startHour:h,endHour:m,replyProvider:c(o[r.replyProvider],i.replyProvider),decisionProvider:c(o[r.decisionProvider],i.decisionProvider),leadDetectionProvider:c(o[r.leadDetectionProvider],i.leadDetectionProvider)};e(u)})})}async function x(e){const o={};return e.openaiApiKey!==void 0&&(o[r.openaiApiKey]=String(e.openaiApiKey)),e.groqApiKey!==void 0&&(o[r.groqApiKey]=String(e.groqApiKey)),e.webhookUrl!==void 0&&(o[r.webhookUrl]=String(e.webhookUrl)),e.replyPrompt!==void 0&&(o[r.replyPrompt]=String(e.replyPrompt)),e.leadPrompt!==void 0&&(o[r.leadPrompt]=String(e.leadPrompt)),e.chatMinDelay!==void 0&&(o[r.chatMinDelay]=e.chatMinDelay),e.chatMaxDelay!==void 0&&(o[r.chatMaxDelay]=e.chatMaxDelay),e.loopMinDelay!==void 0&&(o[r.loopMinDelay]=e.loopMinDelay),e.loopMaxDelay!==void 0&&(o[r.loopMaxDelay]=e.loopMaxDelay),e.startHour!==void 0&&(o[r.startHour]=e.startHour),e.endHour!==void 0&&(o[r.endHour]=e.endHour),e.replyProvider!==void 0&&(o[r.replyProvider]=e.replyProvider),e.decisionProvider!==void 0&&(o[r.decisionProvider]=e.decisionProvider),e.leadDetectionProvider!==void 0&&(o[r.leadDetectionProvider]=e.leadDetectionProvider),new Promise(n=>{chrome.storage.local.set(o,()=>n())})}export{i as D,g,x as s};
