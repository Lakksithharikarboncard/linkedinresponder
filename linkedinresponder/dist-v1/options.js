import{c as G,j as e,r as c}from"./chunks/client-CTQ0Ju4c.js";import{D as v,g as K,s as L}from"./chunks/settings-aOQ5IQro.js";const U=[{id:"openai/gpt-oss-20b",name:"GPT-OSS 20B"},{id:"openai/gpt-oss-120b",name:"GPT-OSS 120B"},{id:"llama-3.3-70b-versatile",name:"Llama 3.3 70B"},{id:"llama-3.1-8b-instant",name:"Llama 3.1 8B (Fast)"},{id:"moonshotai/kimi-k2-instruct-0905",name:"Kimi K2"}],B=[{id:"gpt-5-mini",name:"GPT-5 mini"},{id:"gpt-5-nano",name:"GPT-5 nano"},{id:"gpt-4.1-nano",name:"GPT-4.1 nano"},{id:"gpt-4.1-mini",name:"GPT-4.1 mini"}],F=()=>{const[a,i]=c.useState(v),[N,k]=c.useState(v),[g,h]=c.useState("idle"),[y,d]=c.useState(null),[m,C]=c.useState(!1),[u,S]=c.useState(!1),[M,x]=c.useState({openai:"idle",groq:"idle"}),[P,p]=c.useState({openai:"",groq:""}),w=c.useRef(null);c.useEffect(()=>{(async()=>{try{const s=await K();i(s),k(s)}catch{d("Failed to load settings")}})(),chrome.storage.local.get(["darkMode"],s=>{s.darkMode!==void 0&&C(s.darkMode)})},[]),c.useEffect(()=>{S(JSON.stringify(a)!==JSON.stringify(N))},[a,N]),c.useEffect(()=>{document.documentElement.setAttribute("data-theme",m?"dark":"light"),chrome.storage.local.set({darkMode:m})},[m]);const l=(s,t)=>i(o=>({...o,[s]:t})),O=async()=>{if(d(null),h("saving"),a.endHour<=a.startHour){h("error"),d("End hour must be after start hour");return}if(!a.openaiApiKey.trim()){h("error"),d("OpenAI API key is required");return}if(!a.groqApiKey.trim()){h("error"),d("Groq API key is required");return}try{await L(a),k(a),h("saved"),S(!1),setTimeout(()=>h("idle"),1800)}catch{h("error"),d("Failed to save settings")}},T=()=>{confirm(`Reset all settings to defaults?

This cannot be undone.`)&&i(v)},E=s=>{var n;const t=(n=s.target.files)==null?void 0:n[0];if(!t)return;const o=new FileReader;o.onload=r=>{var q;try{const I=JSON.parse((q=r.target)==null?void 0:q.result);I.settings?(i({...v,...I.settings}),d(null)):d("Invalid settings file")}catch{d("Failed to parse settings file")}},o.readAsText(t),s.target.value=""},R=()=>{const s={settings:a,exportedAt:new Date().toISOString(),version:"2.7.0"},t=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),o=URL.createObjectURL(t),n=document.createElement("a");n.href=o,n.download=`linkedin-autoresponder-settings-${new Date().toISOString().slice(0,10)}.json`,n.click(),URL.revokeObjectURL(o)},A=async s=>{const o={openai:a.openaiApiKey,groq:a.groqApiKey}[s];if(x(n=>({...n,[s]:"testing"})),p(n=>({...n,[s]:""})),!(o!=null&&o.trim())){x(n=>({...n,[s]:"error"})),p(n=>({...n,[s]:"Key is empty"}));return}try{const n=await chrome.runtime.sendMessage({type:"TEST_API_KEY",provider:s,key:o});n!=null&&n.success?(x(r=>({...r,[s]:"success"})),p(r=>({...r,[s]:n.message}))):(x(r=>({...r,[s]:"error"})),p(r=>({...r,[s]:(n==null?void 0:n.message)||"Test failed"})))}catch(n){x(r=>({...r,[s]:"error"})),p(r=>({...r,[s]:(n==null?void 0:n.message)||"Could not reach background script"}))}},j=s=>{const t=s>=12?"PM":"AM";return`${s%12||12}:00 ${t}`},_=a.endHour>a.startHour?`${j(a.startHour)} â€“ ${j(a.endHour)}`:"Invalid",D=s=>{l("replyProvider",s),l("decisionProvider",s),l("leadDetectionProvider",s)};return e.jsxs("div",{className:"options-shell",children:[e.jsxs("header",{className:"options-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("div",{className:"header-icon",children:"âš™ï¸"}),e.jsxs("div",{children:[e.jsx("h1",{children:"Settings"}),e.jsx("p",{children:"LinkedIn Autoresponder v2.7.0"})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"btn ghost",onClick:()=>{var s;return(s=w.current)==null?void 0:s.click()},children:"Import"}),e.jsx("input",{ref:w,type:"file",accept:".json",onChange:E,style:{display:"none"}}),e.jsx("button",{className:"btn ghost",onClick:R,children:"Export"}),e.jsx("button",{className:"btn ghost",onClick:T,children:"Reset"}),e.jsx("button",{className:"btn ghost",onClick:()=>C(!m),children:m?"â˜€ï¸":"ðŸŒ™"})]})]}),y&&e.jsxs("div",{className:"banner error",children:["âš ï¸ ",y]}),u&&!y&&e.jsx("div",{className:"banner warn",children:"You have unsaved changes"}),e.jsxs("div",{className:"grid",children:[e.jsxs("section",{className:"card wide",children:[e.jsx("div",{className:"card-header",children:"API Keys"}),e.jsxs("div",{className:"card-body two-col",children:[e.jsx(H,{label:"OpenAI API Key",value:a.openaiApiKey,onChange:s=>l("openaiApiKey",s),placeholder:"sk-...",status:M.openai,message:P.openai,onTest:()=>A("openai")}),e.jsx(H,{label:"Groq API Key",value:a.groqApiKey,onChange:s=>l("groqApiKey",s),placeholder:"gsk_...",status:M.groq,message:P.groq,onTest:()=>A("groq")})]})]}),e.jsxs("section",{className:"card wide",children:[e.jsx("div",{className:"card-header",children:"AI Provider Selection"}),e.jsxs("div",{className:"card-body three-col",children:[e.jsx(f,{label:"Reply Generation",description:"Generates chat responses",value:a.replyProvider,onChange:s=>l("replyProvider",s)}),e.jsx(f,{label:"Reply Decision",description:"Decides if bot should reply",value:a.decisionProvider,onChange:s=>l("decisionProvider",s)}),e.jsx(f,{label:"Lead Detection",description:"Identifies qualified leads",value:a.leadDetectionProvider,onChange:s=>l("leadDetectionProvider",s)})]}),e.jsxs("div",{className:"quick-row",children:[e.jsx("button",{onClick:()=>D("groq"),children:"All Groq"}),e.jsx("button",{onClick:()=>D("openai"),children:"All OpenAI"}),e.jsx("button",{onClick:()=>{l("replyProvider","groq"),l("decisionProvider","groq"),l("leadDetectionProvider","openai")},children:"Recommended"})]}),e.jsxs("p",{className:"muted",style:{marginTop:"8px"},children:["ðŸ’¡ ",e.jsx("strong",{children:"Recommended:"})," Groq for replies & decisions (fast, cheap), OpenAI for lead detection (accurate)."]})]}),e.jsxs("section",{className:"card wide",children:[e.jsx("div",{className:"card-header",children:"Model Selection"}),e.jsxs("div",{className:"card-body two-col",children:[e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"Groq Model"}),e.jsx("select",{value:a.groqModel,onChange:s=>l("groqModel",s.target.value),children:U.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))}),e.jsx("span",{className:"muted",children:"Used when provider is set to Groq"})]}),e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"OpenAI Model"}),e.jsx("select",{value:a.openaiModel,onChange:s=>l("openaiModel",s.target.value),children:B.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))}),e.jsx("span",{className:"muted",children:"Used when provider is set to OpenAI"})]})]}),e.jsxs("div",{className:"quick-row",children:[e.jsx("button",{onClick:()=>{l("groqModel","llama-3.3-70b-versatile"),l("openaiModel","gpt-5-mini")},children:"Balanced"}),e.jsx("button",{onClick:()=>{l("groqModel","llama-3.1-8b-instant"),l("openaiModel","gpt-5-nano")},children:"Fast & Cheap"}),e.jsx("button",{onClick:()=>{l("groqModel","openai/gpt-oss-120b"),l("openaiModel","gpt-5-mini")},children:"High Quality"})]})]}),e.jsxs("section",{className:"card wide",children:[e.jsx("div",{className:"card-header",children:"Lead Notifications"}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"Zapier Webhook URL"}),e.jsx("input",{type:"url",value:a.webhookUrl,onChange:s=>l("webhookUrl",s.target.value),placeholder:"https://hooks.zapier.com/hooks/catch/..."}),e.jsx("span",{className:"muted",children:"When a lead is detected, JSON data will be sent to this webhook."})]}),a.webhookUrl&&e.jsxs("div",{className:"webhook-preview",children:[e.jsx("p",{className:"field-label",style:{marginBottom:"8px"},children:"Payload Preview:"}),e.jsx("pre",{className:"code-block",children:`{
  "leadName": "John Smith",
  "profileUrl": "https://linkedin.com/in/...",
  "company": "Acme Corp",
  "jobTitle": "VP of Sales",
  "headline": "VP of Sales at Acme Corp",
  "conversationHistory": "...",
  "messageCount": 12,
  "detectedAt": "2026-01-04T19:30:00Z"
}`})]})]})]}),e.jsxs("section",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("span",{children:"Working Hours"}),e.jsx("span",{className:`pill ${a.endHour<=a.startHour?"pill-warn":""}`,children:_})]}),e.jsxs("div",{className:"card-body two-col",children:[e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"Start"}),e.jsx("select",{value:a.startHour,onChange:s=>l("startHour",Number(s.target.value)),children:Array.from({length:24},(s,t)=>e.jsx("option",{value:t,children:j(t)},t))})]}),e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"End"}),e.jsx("select",{value:a.endHour,onChange:s=>l("endHour",Number(s.target.value)),children:Array.from({length:24},(s,t)=>e.jsx("option",{value:t,children:j(t)},t))})]})]}),a.endHour<=a.startHour&&e.jsx("p",{className:"muted text-warn",children:"End time must be later than start time."}),e.jsxs("div",{className:"quick-row",children:[e.jsx("button",{onClick:()=>{l("startHour",9),l("endHour",17)},children:"Business"}),e.jsx("button",{onClick:()=>{l("startHour",8),l("endHour",20)},children:"Extended"}),e.jsx("button",{onClick:()=>{l("startHour",0),l("endHour",23)},children:"24/7"})]})]}),e.jsxs("section",{className:"card",children:[e.jsx("div",{className:"card-header",children:"Timing & Delays"}),e.jsxs("div",{className:"card-body two-col",children:[e.jsx(b,{label:"Chat Min (sec)",value:a.chatMinDelay/1e3,onChange:s=>l("chatMinDelay",s*1e3),min:.25,max:60,step:.25}),e.jsx(b,{label:"Chat Max (sec)",value:a.chatMaxDelay/1e3,onChange:s=>l("chatMaxDelay",s*1e3),min:.25,max:120,step:.25}),e.jsx(b,{label:"Loop Min (sec)",value:a.loopMinDelay/1e3,onChange:s=>l("loopMinDelay",s*1e3),min:1,max:600,step:1}),e.jsx(b,{label:"Loop Max (sec)",value:a.loopMaxDelay/1e3,onChange:s=>l("loopMaxDelay",s*1e3),min:1,max:600,step:1})]}),e.jsxs("div",{className:"quick-row",children:[e.jsx("button",{onClick:()=>{l("chatMinDelay",1e3),l("chatMaxDelay",2e3),l("loopMinDelay",5e3),l("loopMaxDelay",1e4)},children:"Fast"}),e.jsx("button",{onClick:()=>{l("chatMinDelay",2e3),l("chatMaxDelay",5e3),l("loopMinDelay",1e4),l("loopMaxDelay",3e4)},children:"Normal"}),e.jsx("button",{onClick:()=>{l("chatMinDelay",3e3),l("chatMaxDelay",8e3),l("loopMinDelay",3e4),l("loopMaxDelay",6e4)},children:"Human-like"})]})]}),e.jsxs("section",{className:"card wide",children:[e.jsx("div",{className:"card-header",children:"AI Prompts"}),e.jsxs("div",{className:"card-body two-col",children:[e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"Reply Prompt"}),e.jsx("textarea",{rows:5,value:a.replyPrompt,onChange:s=>l("replyPrompt",s.target.value)}),e.jsxs("div",{className:"chip-row",children:[e.jsx("span",{className:"chip-label",children:"Variables:"}),e.jsx("button",{className:"chip",onClick:()=>l("replyPrompt",a.replyPrompt+"{user_name}"),children:"{user_name}"}),e.jsx("button",{className:"chip",onClick:()=>l("replyPrompt",a.replyPrompt+"{extracted_text}"),children:"{extracted_text}"})]})]}),e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"Lead Detection Prompt"}),e.jsx("textarea",{rows:3,value:a.leadPrompt,onChange:s=>l("leadPrompt",s.target.value)})]})]}),e.jsxs("div",{className:"quick-row",children:[e.jsx("button",{onClick:()=>l("replyPrompt","You are {user_name}'s professional assistant. Reply briefly and helpfully to: {extracted_text}"),children:"Professional"}),e.jsx("button",{onClick:()=>l("replyPrompt","You are {user_name}. Reply casually and friendly to: {extracted_text}"),children:"Casual"}),e.jsx("button",{onClick:()=>l("replyPrompt","You are {user_name}, a sales professional. Reply with interest and ask qualifying questions to: {extracted_text}"),children:"Sales"})]})]})]}),e.jsxs("footer",{className:"options-footer",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u&&e.jsx("span",{className:"unsaved-dot",children:"â—"}),e.jsx("span",{children:u?"Unsaved changes":"All changes saved"})]}),e.jsxs("div",{className:"footer-actions",children:[e.jsx("button",{className:"btn ghost",onClick:()=>i(N),disabled:!u,children:"Cancel"}),e.jsx("button",{className:`btn primary ${g==="saved"?"success":""}`,onClick:O,disabled:g==="saving"||!u,children:g==="saving"?"Saving...":g==="saved"?"âœ“ Saved":"Save Settings"})]})]})]})};function H(a){return e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:a.label}),e.jsxs("div",{className:"row",children:[e.jsx("input",{type:"password",value:a.value,onChange:i=>a.onChange(i.target.value),placeholder:a.placeholder,style:{flex:1}}),e.jsx("button",{className:"btn ghost",onClick:a.onTest,disabled:!a.value||a.status==="testing",style:{whiteSpace:"nowrap"},children:a.status==="testing"?"...":"Test"}),e.jsx($,{status:a.status})]}),a.message&&e.jsx("span",{className:`muted ${a.status==="error"?"text-warn":""}`,children:a.message})]})}function f(a){return e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:a.label}),e.jsxs("select",{value:a.value,onChange:i=>a.onChange(i.target.value),children:[e.jsx("option",{value:"groq",children:"Groq (Fast)"}),e.jsx("option",{value:"openai",children:"OpenAI (Accurate)"})]}),e.jsx("span",{className:"muted",children:a.description})]})}function b(a){return e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:a.label}),e.jsx("input",{type:"number",value:a.value,min:a.min,max:a.max,step:a.step,onChange:i=>a.onChange(Number(i.target.value))})]})}function $({status:a}){const i=a==="success"?"#74a892":a==="error"?"#c7522a":a==="testing"?"#e5c185":"#adb5bd";return e.jsx("span",{className:"status-dot",style:{background:i}})}const J=G(document.getElementById("options-root"));J.render(e.jsx(F,{}));
