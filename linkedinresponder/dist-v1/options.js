import{c as _,j as e,r as c}from"./chunks/client-CTQ0Ju4c.js";import{D as v,g as G,s as L}from"./chunks/settings-B_q-U54m.js";const U=[{id:"openai/gpt-oss-20b",name:"GPT-OSS 20B"},{id:"openai/gpt-oss-120b",name:"GPT-OSS 120B"},{id:"llama-3.3-70b-versatile",name:"Llama 3.3 70B"},{id:"llama-3.1-8b-instant",name:"Llama 3.1 8B (Fast)"},{id:"moonshotai/kimi-k2-instruct-0905",name:"Kimi K2"}],F=[{id:"gpt-5.1",name:"GPT-5.1"},{id:"gpt-5",name:"GPT-5"},{id:"gpt-5-mini",name:"GPT-5 mini"},{id:"gpt-5-nano",name:"GPT-5 nano"},{id:"gpt-5.1-chat-latest",name:"GPT-5.1 Chat"}],B=[{id:"devstral-2512:free",name:"Devstral 2512"},{id:"kimi-k2-0905:free",name:"Kimi K2"},{id:"minimax-m2:free",name:"Minimax M2"},{id:"deepseek-r1t2-chimera:free",name:"DeepSeek R1T2"}],$=()=>{const[s,i]=c.useState(v),[f,A]=c.useState(v),[g,h]=c.useState("idle"),[N,d]=c.useState(null),[u,S]=c.useState(!1),[m,P]=c.useState(!1),[k,x]=c.useState({openai:"idle",groq:"idle",routeway:"idle"}),[w,p]=c.useState({openai:"",groq:"",routeway:""}),q=c.useRef(null);c.useEffect(()=>{(async()=>{try{const a=await G();i(a),A(a)}catch{d("Failed to load settings")}})(),chrome.storage.local.get(["darkMode"],a=>{a.darkMode!==void 0&&S(a.darkMode)})},[]),c.useEffect(()=>{P(JSON.stringify(s)!==JSON.stringify(f))},[s,f]),c.useEffect(()=>{document.documentElement.setAttribute("data-theme",u?"dark":"light"),chrome.storage.local.set({darkMode:u})},[u]);const l=(a,n)=>i(o=>({...o,[a]:n})),K=async()=>{if(d(null),h("saving"),s.endHour<=s.startHour){h("error"),d("End hour must be after start hour");return}if(!s.openaiApiKey.trim()){h("error"),d("OpenAI API key is required");return}if(!s.groqApiKey.trim()&&!s.groqApiKey2.trim()){h("error"),d("At least one Groq API key is required");return}try{await L(s),A(s),h("saved"),P(!1),setTimeout(()=>h("idle"),1800)}catch{h("error"),d("Failed to save settings")}},O=()=>{confirm(`Reset all settings to defaults?

This cannot be undone.`)&&i(v)},R=a=>{var t;const n=(t=a.target.files)==null?void 0:t[0];if(!n)return;const o=new FileReader;o.onload=r=>{var D;try{const I=JSON.parse((D=r.target)==null?void 0:D.result);I.settings?(i({...v,...I.settings}),d(null)):d("Invalid settings file")}catch{d("Failed to parse settings file")}},o.readAsText(n),a.target.value=""},H=()=>{const a={settings:s,exportedAt:new Date().toISOString(),version:"2.8.0"},n=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),o=URL.createObjectURL(n),t=document.createElement("a");t.href=o,t.download=`linkedin-autoresponder-settings-${new Date().toISOString().slice(0,10)}.json`,t.click(),URL.revokeObjectURL(o)},C=async a=>{const o={openai:s.openaiApiKey,groq:s.groqApiKey,routeway:s.routewayApiKey}[a];if(x(t=>({...t,[a]:"testing"})),p(t=>({...t,[a]:""})),!(o!=null&&o.trim())){x(t=>({...t,[a]:"error"})),p(t=>({...t,[a]:"Key is empty"}));return}try{const t=await chrome.runtime.sendMessage({type:"TEST_API_KEY",provider:a,key:o});t!=null&&t.success?(x(r=>({...r,[a]:"success"})),p(r=>({...r,[a]:t.message}))):(x(r=>({...r,[a]:"error"})),p(r=>({...r,[a]:(t==null?void 0:t.message)||"Test failed"})))}catch(t){x(r=>({...r,[a]:"error"})),p(r=>({...r,[a]:(t==null?void 0:t.message)||"Could not reach background script"}))}},j=a=>{const n=a>=12?"PM":"AM";return`${a%12||12}:00 ${n}`},E=s.endHour>s.startHour?`${j(s.startHour)} â€“ ${j(s.endHour)}`:"Invalid",M=a=>{l("replyProvider",a),l("leadDetectionProvider",a)};return e.jsxs("div",{className:"options-shell",children:[e.jsxs("header",{className:"options-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsx("div",{className:"header-icon",children:"âš™ï¸"}),e.jsxs("div",{children:[e.jsx("h1",{children:"Settings"}),e.jsx("p",{children:"LinkedIn Autoresponder v2.8.0"})]})]}),e.jsxs("div",{className:"header-actions",children:[e.jsx("button",{className:"btn ghost",onClick:()=>{var a;return(a=q.current)==null?void 0:a.click()},children:"Import"}),e.jsx("input",{ref:q,type:"file",accept:".json",onChange:R,style:{display:"none"}}),e.jsx("button",{className:"btn ghost",onClick:H,children:"Export"}),e.jsx("button",{className:"btn ghost",onClick:O,children:"Reset"}),e.jsx("button",{className:"btn ghost",onClick:()=>S(!u),children:u?"â˜€ï¸":"ðŸŒ™"})]})]}),N&&e.jsxs("div",{className:"banner error",children:["âš ï¸ ",N]}),m&&!N&&e.jsx("div",{className:"banner warn",children:"You have unsaved changes"}),e.jsxs("div",{className:"grid",children:[e.jsxs("section",{className:"card wide",children:[e.jsx("div",{className:"card-header",children:"API Keys"}),e.jsxs("div",{className:"card-body three-col",children:[e.jsx(b,{label:"OpenAI API Key",value:s.openaiApiKey,onChange:a=>l("openaiApiKey",a),placeholder:"sk-...",status:k.openai,message:w.openai,onTest:()=>C("openai")}),e.jsx(b,{label:"Groq API Key #1",value:s.groqApiKey,onChange:a=>l("groqApiKey",a),placeholder:"gsk_...",status:k.groq,message:w.groq,onTest:()=>C("groq")}),e.jsx(b,{label:"Groq API Key #2 (Optional)",value:s.groqApiKey2,onChange:a=>l("groqApiKey2",a),placeholder:"gsk_...",status:"idle",message:"Rotates with Key #1 to avoid rate limits",onTest:()=>{},optional:!0}),e.jsx(b,{label:"Routeway API Key (Optional)",value:s.routewayApiKey,onChange:a=>l("routewayApiKey",a),placeholder:"rw_...",status:k.routeway,message:w.routeway,onTest:()=>C("routeway"),optional:!0})]}),e.jsxs("p",{className:"muted",style:{marginTop:"4px"},children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Add a second Groq key to double your rate limits. Keys rotate automatically."]})]}),e.jsxs("section",{className:"card wide",children:[e.jsx("div",{className:"card-header",children:"AI Provider Selection"}),e.jsxs("div",{className:"card-body two-col",children:[e.jsx(T,{label:"Reply Generation & Decision",description:"Decides if bot should reply and generates responses",value:s.replyProvider,onChange:a=>l("replyProvider",a)}),e.jsx(T,{label:"Lead Detection",description:"Identifies qualified leads from conversations",value:s.leadDetectionProvider,onChange:a=>l("leadDetectionProvider",a)})]}),e.jsxs("div",{className:"quick-row",children:[e.jsx("button",{onClick:()=>M("groq"),children:"All Groq"}),e.jsx("button",{onClick:()=>M("openai"),children:"All OpenAI"}),e.jsx("button",{onClick:()=>M("routeway"),children:"All Routeway"}),e.jsx("button",{onClick:()=>{l("replyProvider","groq"),l("leadDetectionProvider","openai")},children:"Recommended"})]}),e.jsxs("p",{className:"muted",style:{marginTop:"8px"},children:["ðŸ’¡ ",e.jsx("strong",{children:"Recommended:"})," Groq for replies (fast, free), OpenAI for lead detection (accurate)."]})]}),e.jsxs("section",{className:"card wide",children:[e.jsx("div",{className:"card-header",children:"Model Selection"}),e.jsxs("div",{className:"card-body three-col",children:[e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"Groq Model"}),e.jsx("select",{value:s.groqModel,onChange:a=>l("groqModel",a.target.value),children:U.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))}),e.jsx("span",{className:"muted",children:"Used when provider is Groq"})]}),e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"OpenAI Model"}),e.jsx("select",{value:s.openaiModel,onChange:a=>l("openaiModel",a.target.value),children:F.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))}),e.jsx("span",{className:"muted",children:"Used when provider is OpenAI"})]}),e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"Routeway Model"}),e.jsx("select",{value:s.routewayModel,onChange:a=>l("routewayModel",a.target.value),children:B.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))}),e.jsx("span",{className:"muted",children:"Used when provider is Routeway"})]})]}),e.jsxs("div",{className:"quick-row",children:[e.jsx("button",{onClick:()=>{l("groqModel","llama-3.3-70b-versatile"),l("openaiModel","gpt-5.1"),l("routewayModel","minimax-m2:free")},children:"Balanced"}),e.jsx("button",{onClick:()=>{l("groqModel","llama-3.1-8b-instant"),l("openaiModel","gpt-5-nano"),l("routewayModel","devstral-2512:free")},children:"Fast & Cheap"}),e.jsx("button",{onClick:()=>{l("groqModel","openai/gpt-oss-120b"),l("openaiModel","gpt-5-mini"),l("routewayModel","deepseek-r1t2-chimera:free")},children:"High Quality"})]})]}),e.jsxs("section",{className:"card wide",children:[e.jsx("div",{className:"card-header",children:"Lead Notifications"}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"Zapier Webhook URL (Optional)"}),e.jsx("input",{type:"url",value:s.webhookUrl,onChange:a=>l("webhookUrl",a.target.value),placeholder:"https://hooks.zapier.com/hooks/catch/..."}),e.jsx("span",{className:"muted",children:"When a lead is detected, JSON data will be sent to this webhook."})]}),s.webhookUrl&&e.jsxs("div",{className:"webhook-preview",children:[e.jsx("p",{className:"field-label",style:{marginBottom:"8px"},children:"Payload Preview:"}),e.jsx("pre",{className:"code-block",children:`{
  "leadName": "John Smith",
  "profileUrl": "https://linkedin.com/in/...",
  "company": "Acme Corp",
  "jobTitle": "VP of Sales",
  "headline": "VP of Sales at Acme Corp",
  "conversationHistory": "...",
  "messageCount": 12,
  "detectedAt": "2026-01-08T19:30:00Z"
}`})]})]})]}),e.jsxs("section",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsx("span",{children:"Working Hours"}),e.jsx("span",{className:`pill ${s.endHour<=s.startHour?"pill-warn":""}`,children:E})]}),e.jsxs("div",{className:"card-body two-col",children:[e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"Start"}),e.jsx("select",{value:s.startHour,onChange:a=>l("startHour",Number(a.target.value)),children:Array.from({length:24},(a,n)=>e.jsx("option",{value:n,children:j(n)},n))})]}),e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"End"}),e.jsx("select",{value:s.endHour,onChange:a=>l("endHour",Number(a.target.value)),children:Array.from({length:24},(a,n)=>e.jsx("option",{value:n,children:j(n)},n))})]})]}),s.endHour<=s.startHour&&e.jsx("p",{className:"muted text-warn",children:"End time must be later than start time."}),e.jsxs("div",{className:"quick-row",children:[e.jsx("button",{onClick:()=>{l("startHour",9),l("endHour",17)},children:"Business"}),e.jsx("button",{onClick:()=>{l("startHour",8),l("endHour",20)},children:"Extended"}),e.jsx("button",{onClick:()=>{l("startHour",0),l("endHour",23)},children:"24/7"})]})]}),e.jsxs("section",{className:"card",children:[e.jsx("div",{className:"card-header",children:"Timing & Delays"}),e.jsxs("div",{className:"card-body two-col",children:[e.jsx(y,{label:"Chat Min (sec)",value:s.chatMinDelay/1e3,onChange:a=>l("chatMinDelay",a*1e3),min:.25,max:60,step:.25}),e.jsx(y,{label:"Chat Max (sec)",value:s.chatMaxDelay/1e3,onChange:a=>l("chatMaxDelay",a*1e3),min:.25,max:120,step:.25}),e.jsx(y,{label:"Loop Min (sec)",value:s.loopMinDelay/1e3,onChange:a=>l("loopMinDelay",a*1e3),min:1,max:600,step:1}),e.jsx(y,{label:"Loop Max (sec)",value:s.loopMaxDelay/1e3,onChange:a=>l("loopMaxDelay",a*1e3),min:1,max:600,step:1})]}),e.jsxs("div",{className:"quick-row",children:[e.jsx("button",{onClick:()=>{l("chatMinDelay",1e3),l("chatMaxDelay",2e3),l("loopMinDelay",5e3),l("loopMaxDelay",1e4)},children:"Fast"}),e.jsx("button",{onClick:()=>{l("chatMinDelay",2e3),l("chatMaxDelay",5e3),l("loopMinDelay",1e4),l("loopMaxDelay",3e4)},children:"Normal"}),e.jsx("button",{onClick:()=>{l("chatMinDelay",3e3),l("chatMaxDelay",8e3),l("loopMinDelay",3e4),l("loopMaxDelay",6e4)},children:"Human-like"})]})]}),e.jsxs("section",{className:"card wide",children:[e.jsx("div",{className:"card-header",children:"AI Prompts"}),e.jsxs("div",{className:"card-body two-col",children:[e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"Reply Prompt"}),e.jsx("textarea",{rows:5,value:s.replyPrompt,onChange:a=>l("replyPrompt",a.target.value)}),e.jsxs("div",{className:"chip-row",children:[e.jsx("span",{className:"chip-label",children:"Variables:"}),e.jsx("button",{className:"chip",onClick:()=>l("replyPrompt",s.replyPrompt+"{user_name}"),children:"{user_name}"}),e.jsx("button",{className:"chip",onClick:()=>l("replyPrompt",s.replyPrompt+"{extracted_text}"),children:"{extracted_text}"})]})]}),e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:"Lead Detection Prompt"}),e.jsx("textarea",{rows:3,value:s.leadPrompt,onChange:a=>l("leadPrompt",a.target.value)})]})]}),e.jsxs("div",{className:"quick-row",children:[e.jsx("button",{onClick:()=>l("replyPrompt","You are {user_name}'s professional assistant. Reply briefly and helpfully to: {extracted_text}"),children:"Professional"}),e.jsx("button",{onClick:()=>l("replyPrompt","You are {user_name}. Reply casually and friendly to: {extracted_text}"),children:"Casual"}),e.jsx("button",{onClick:()=>l("replyPrompt","You are {user_name}, a sales professional. Reply with interest and ask qualifying questions to: {extracted_text}"),children:"Sales"})]})]})]}),e.jsxs("footer",{className:"options-footer",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m&&e.jsx("span",{className:"unsaved-dot",children:"â—"}),e.jsx("span",{children:m?"Unsaved changes":"All changes saved"})]}),e.jsxs("div",{className:"footer-actions",children:[e.jsx("button",{className:"btn ghost",onClick:()=>i(f),disabled:!m,children:"Cancel"}),e.jsx("button",{className:`btn primary ${g==="saved"?"success":""}`,onClick:K,disabled:g==="saving"||!m,children:g==="saving"?"Saving...":g==="saved"?"âœ“ Saved":"Save Settings"})]})]})]})};function b(s){return e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:s.label}),e.jsxs("div",{className:"row",children:[e.jsx("input",{type:"password",value:s.value,onChange:i=>s.onChange(i.target.value),placeholder:s.placeholder,style:{flex:1}}),!s.optional&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn ghost",onClick:s.onTest,disabled:!s.value||s.status==="testing",style:{whiteSpace:"nowrap"},children:s.status==="testing"?"...":"Test"}),e.jsx(J,{status:s.status})]})]}),s.message&&e.jsx("span",{className:`muted ${s.status==="error"?"text-warn":""}`,children:s.message})]})}function T(s){return e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:s.label}),e.jsxs("select",{value:s.value,onChange:i=>s.onChange(i.target.value),children:[e.jsx("option",{value:"groq",children:"Groq (Fast & Free)"}),e.jsx("option",{value:"openai",children:"OpenAI (Most Accurate)"}),e.jsx("option",{value:"routeway",children:"Routeway (Free Alternative)"})]}),e.jsx("span",{className:"muted",children:s.description})]})}function y(s){return e.jsxs("div",{className:"field-block",children:[e.jsx("label",{className:"field-label",children:s.label}),e.jsx("input",{type:"number",value:s.value,min:s.min,max:s.max,step:s.step,onChange:i=>s.onChange(Number(i.target.value))})]})}function J({status:s}){const i=s==="success"?"#74a892":s==="error"?"#c7522a":s==="testing"?"#e5c185":"#adb5bd";return e.jsx("span",{className:"status-dot",style:{background:i}})}const Y=_(document.getElementById("options-root"));Y.render(e.jsx($,{}));
